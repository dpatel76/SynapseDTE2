# FR Y-14M Schedule D.1 Data Profiling Rules - Example Output

This example demonstrates the sophisticated regulatory-specific profiling rules generated by our enhanced prompt for FR Y-14M Schedule D.1 - Loan Level Table.

## Sample Input Attributes:
```
- LOAN_ID (String): Unique identifier for the loan [Mandatory]
- ORIGINATION_DATE (Date): Date when loan was originated [Mandatory]  
- OUTSTANDING_BALANCE (Decimal): Current outstanding principal balance [Mandatory]
- DELINQUENCY_STATUS (String): Current delinquency bucket [Mandatory]
- LOAN_PURPOSE (String): Purpose of the loan (auto, personal, etc.) [Mandatory]
- FICO_SCORE (Integer): Credit score at origination [Optional]
```

## Example Enhanced Profiling Rules Output:

```json
[
  {
    "attribute_id": "loan_id_001",
    "rule_name": "LOAN_ID Uniqueness and Format Validation - FR Y-14M D.1",
    "rule_type": "regulatory",
    "rule_category": "mandatory", 
    "regulatory_requirement": "FR Y-14M Technical Specifications Section 3.1 - Unique loan identification required",
    "rule_logic": "Verify LOAN_ID is unique within submission period, alphanumeric format 5-50 characters, no special characters except hyphen and underscore",
    "expected_result": "100% unique values, 0% format violations, pattern: ^[A-Za-z0-9_-]{5,50}$",
    "severity": "critical",
    "business_impact": "Duplicate or invalid loan IDs compromise loan-level data integrity and stress testing model accuracy",
    "data_lineage_check": "Trace to origination system primary key, validate against loan servicing system",
    "frequency": "real_time",
    "remediation_priority": "immediate",
    "testing_methodology": "Hash-based duplicate detection, regex pattern validation, cross-system reconciliation",
    "exception_criteria": "None - 100% compliance required for regulatory submission",
    "related_schedules": "Cross-reference with Schedules A, B, C for exclusion validation",
    "model_impact": "Critical for PD/LGD/EAD model input data quality and loan-level stress testing",
    "audit_trail": "Document unique identifier generation methodology and validation controls",
    "rationale": "Federal Reserve requires unique loan-level identification for comprehensive stress testing and regulatory examination"
  },
  {
    "attribute_id": "outstanding_balance_003", 
    "rule_name": "Outstanding Balance Reconciliation and Range Validation",
    "rule_type": "business_logic",
    "rule_category": "mandatory",
    "regulatory_requirement": "FR Y-14M Technical Specifications Section 4.2 - Balance components reconciliation",
    "rule_logic": "Outstanding balance = Principal balance + Accrued interest + Fees, range $0.01 to $2,000,000, precision to 2 decimal places",
    "expected_result": "Balance components sum within $0.01 tolerance, no negative balances except charge-offs, 100% within range limits",
    "severity": "critical",
    "business_impact": "Incorrect balances distort loss calculations and stress testing results, affect regulatory capital adequacy",
    "data_lineage_check": "Reconcile with general ledger, validate component calculations from loan servicing system",
    "frequency": "daily",
    "remediation_priority": "immediate",
    "testing_methodology": "Component summation validation, range boundary testing, precision verification, historical trend analysis",
    "exception_criteria": "Charge-off accounts may have $0.00 balance with documented charge-off date",
    "related_schedules": "Aggregate balances must reconcile with consolidated financial statements",
    "model_impact": "Direct input to EAD calculations and loss severity modeling",
    "audit_trail": "Document balance calculation methodology, component source mapping, reconciliation procedures",
    "rationale": "Accurate outstanding balances are fundamental to stress testing loss projections and regulatory capital calculations"
  },
  {
    "attribute_id": "delinquency_status_004",
    "rule_name": "Delinquency Status Classification and Progression Logic",
    "rule_type": "relationship", 
    "rule_category": "mandatory",
    "regulatory_requirement": "FR Y-14M Technical Specifications Section 5.3 - Delinquency bucket definitions per OCC guidelines",
    "rule_logic": "Valid values: Current, 30-59 DPD, 60-89 DPD, 90-119 DPD, 120+ DPD, Charge-off. Progression must be logical based on payment history",
    "expected_result": "100% valid enumerated values, delinquency progression follows business rules, alignment with payment due dates",
    "severity": "high",
    "business_impact": "Incorrect delinquency classification affects loss forecasting, regulatory capital calculations, and credit risk assessment",
    "data_lineage_check": "Validate against payment history table, cross-check with loan servicing system delinquency calculations",
    "frequency": "monthly",
    "remediation_priority": "next_cycle",
    "testing_methodology": "Enumeration validation, temporal progression analysis, payment history correlation, aging bucket calculation verification",
    "exception_criteria": "Modified loans may have adjusted delinquency calculation methodology with documented approval",
    "related_schedules": "Delinquency rates must be consistent across all consumer loan schedules",
    "model_impact": "Primary input for PD model calibration and loss rate estimation",
    "audit_trail": "Document delinquency calculation methodology, aging logic, modification procedures",
    "rationale": "Accurate delinquency classification is essential for regulatory stress testing and credit risk management"
  },
  {
    "attribute_id": "loan_purpose_005",
    "rule_name": "Loan Purpose Classification and Regulatory Mapping",
    "rule_type": "regulatory",
    "rule_category": "mandatory",
    "regulatory_requirement": "FR Y-14M Technical Specifications Appendix A - Consumer loan purpose codes",
    "rule_logic": "Valid purpose codes: AUTO, PERSONAL, STUDENT, BOAT_RV, OTHER_SECURED, LINE_OF_CREDIT. Must align with product classification and collateral type",
    "expected_result": "100% valid purpose codes, consistency with loan characteristics, proper exclusion of mortgage/credit card products",
    "severity": "high", 
    "business_impact": "Incorrect purpose classification affects portfolio segmentation, risk modeling, and regulatory reporting accuracy",
    "data_lineage_check": "Validate against origination system purpose codes, cross-reference with product master data",
    "frequency": "monthly",
    "remediation_priority": "next_cycle",
    "testing_methodology": "Enumeration validation, cross-field consistency checking, product exclusion verification",
    "exception_criteria": "Mixed-purpose loans require documentation of primary purpose determination methodology",
    "related_schedules": "Ensure proper exclusion from Schedules A (mortgage), B (home equity), C (credit card)",
    "model_impact": "Used for risk segmentation and purpose-specific loss modeling",
    "audit_trail": "Document purpose code mapping, classification criteria, exclusion procedures",
    "rationale": "Proper loan purpose classification ensures accurate portfolio reporting and risk assessment per Federal Reserve requirements"
  },
  {
    "attribute_id": "fico_score_006",
    "rule_name": "FICO Score Validation and Timing Consistency",
    "rule_type": "format",
    "rule_category": "conditional",
    "regulatory_requirement": "FR Y-14M Technical Specifications Section 6.1 - Credit score reporting standards",
    "rule_logic": "Range 300-850, integer values only, score date within 90 days of origination, vendor and version must be specified",
    "expected_result": "Valid range compliance, no fractional scores, timing consistency with origination, vendor standardization",
    "severity": "medium",
    "business_impact": "Invalid credit scores affect underwriting analysis, fair lending assessments, and credit risk modeling accuracy",
    "data_lineage_check": "Validate against credit bureau data pulls, verify vendor and version consistency",
    "frequency": "monthly", 
    "remediation_priority": "planned",
    "testing_methodology": "Range validation, integer verification, timing analysis, vendor consistency checking",
    "exception_criteria": "No-score scenarios require documentation of reason (thin file, etc.)",
    "related_schedules": "Credit score methodologies must be consistent across all consumer lending schedules",
    "model_impact": "Primary risk factor for PD modeling and underwriting analysis",
    "audit_trail": "Document credit score vendor selection, timing policies, exception handling procedures",
    "rationale": "Consistent credit score reporting supports accurate risk assessment and regulatory examination requirements"
  }
]
```

## Key Enhancements in Regulatory-Specific Rules:

### 1. **Regulatory Precision**
- Specific FR Y-14M Technical Specification references
- Federal Reserve guidance citations (SR 11-7, SR 15-18)
- OCC and CFPB requirement alignment

### 2. **Enhanced Categorization**
- Rule types: regulatory, business_logic, relationship, format, completeness
- Categories: mandatory, conditional, enhancement
- Severity: critical, high, medium, low

### 3. **Business Impact Assessment**
- Stress testing model impact
- Regulatory capital calculation effects
- Credit risk management implications

### 4. **Operational Details**
- Data lineage validation requirements
- Testing methodologies and frequencies
- Remediation priorities and timelines
- Exception criteria and handling

### 5. **Cross-Schedule Integration**
- Related schedule dependencies
- Portfolio reconciliation requirements
- Exclusion logic validation

### 6. **Audit and Compliance**
- Audit trail documentation requirements
- Model impact assessments
- Regulatory examination readiness

This sophisticated approach ensures that data profiling rules are not just technical validations, but comprehensive regulatory compliance checks that support accurate stress testing, risk management, and regulatory reporting for FR Y-14M Schedule D.1.